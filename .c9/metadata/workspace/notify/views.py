{"filter":false,"title":"views.py","tooltip":"/notify/views.py","undoManager":{"mark":12,"position":12,"stack":[[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":["from django.shortcuts import render","","# Create your views here.",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":32,"column":43},"action":"insert","lines":["from django.shortcuts import render","from active.models import Notification","from friend.decorators import ajax_required","from django.http import HttpResponse, HttpResponseBadRequest","from django.contrib.auth.decorators import login_required","","","@login_required","def notifications(request):","    user = request.user","    notifications = Notification.objects.filter(to_user=user)","    unread = Notification.objects.filter(to_user=user, is_read=False)","    for notification in unread:","        notification.is_read = True","        notification.save()        ","    return render(request, 'notification.html', {'notifications': notifications})","","@login_required","@ajax_required","def last_notifications(request):","    user = request.user","    notifications = Notification.objects.filter(to_user=user, is_read=False)[:5]","    for notification in notifications:","        notification.is_read = True","        notification.save()","    return render(request, 'last_notifications.html', {'notifications': notifications})","","@login_required","@ajax_required","def check_notifications(request):","    user = request.user","    notifications = Notification.objects.filter(to_user=user, is_read=False)[:5]","    return HttpResponse(len(notifications))"]}],[{"start":{"row":1,"column":10},"end":{"row":1,"column":11},"action":"remove","lines":["e"],"id":3}],[{"start":{"row":1,"column":9},"end":{"row":1,"column":10},"action":"remove","lines":["v"],"id":4}],[{"start":{"row":1,"column":8},"end":{"row":1,"column":9},"action":"remove","lines":["i"],"id":5}],[{"start":{"row":1,"column":7},"end":{"row":1,"column":8},"action":"remove","lines":["t"],"id":6}],[{"start":{"row":1,"column":6},"end":{"row":1,"column":7},"action":"remove","lines":["c"],"id":7}],[{"start":{"row":1,"column":5},"end":{"row":1,"column":6},"action":"remove","lines":["a"],"id":8}],[{"start":{"row":1,"column":5},"end":{"row":1,"column":6},"action":"insert","lines":["n"],"id":9}],[{"start":{"row":1,"column":6},"end":{"row":1,"column":7},"action":"insert","lines":["o"],"id":10}],[{"start":{"row":1,"column":7},"end":{"row":1,"column":8},"action":"insert","lines":["t"],"id":11}],[{"start":{"row":1,"column":8},"end":{"row":1,"column":9},"action":"insert","lines":["i"],"id":12}],[{"start":{"row":1,"column":9},"end":{"row":1,"column":10},"action":"insert","lines":["f"],"id":13}],[{"start":{"row":1,"column":10},"end":{"row":1,"column":11},"action":"insert","lines":["y"],"id":14}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":32,"column":43},"end":{"row":32,"column":43},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1456851820000,"hash":"602c1c9147c7d18e4c11491f90e1b7cc0fcca883"}